<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Array Methods</title>
    <style>
      body {
        background-color: black;
      }
    </style>
  </head>
  <body>
    <script>
      /*         1.	Array Creation and Access:
      o	Create an array of 5 fruits.
      o	Access the third fruit in the array and print it to the console.
       */
      const fruits = ["Banana", "Apple", "Kiwi", "Grapes", "Mango"];
      const thirdFruit = fruits.at(3);
      const lastFruit = fruits.at(-1);
      const firstFruit = fruits.at(0);
      const secondFruit = fruits[1];
      console.log(`first fruit: ${firstFruit}\nsecond fruit: ${secondFruit}\nthird fruit: ${thirdFruit}\nlast fruit: ${lastFruit}\n
              `);

      /*         2.	Array Modification:
      o	Add "kiwi" to the end of the fruit array.
      o	Remove the first fruit from the array.
      o	Replace the second fruit with "banana".
       */
      fruits.push("Pineapple");
      console.log(`After adding Pineapple to the end: `, fruits);
      fruits.shift(0);
      console.log(
        `After removing first element from the array using shift(): `,
        fruits
      );
      fruits.splice(0, 1);
      console.log(
        `After removing first element from the array using splice: `,
        fruits
      );
      fruits.splice(1, 1, "Banana");
      console.log(`After replacing second fruit with banana `, fruits);

      /*       3.	Array Length and Iteration:
      o	Determine the number of fruits in the array.
      o	Iterate over the fruit array and print each fruit on a new line.
       */
      const fLen = fruits.length;
      console.log(`Number of fruits in an array: ${fLen}`);
      console.log("List of fruits in new line:");
      fruits.forEach((value) => {
        console.log(value);
      });

      /*       4.	Array Slicing and Splicing:
      o	Extract the first 3 fruits from the array and store them in a new array.
      o	Remove the last 2 fruits from the original array.
      o	Insert "grape" and "orange" at the beginning of the array.
       */
      const newFruits = [
        "Banana",
        "Apple",
        "Kiwi",
        "Grapes",
        "Mango",
        "Pineapple",
        "Dates",
      ];
      console.log(`The array before extraction:`, newFruits);
      const newArr = newFruits.slice(0, 3);
      console.log(`The new array made from extraction: `, newArr);

      newFruits.splice(newFruits.length - 2, 2);
      console.log(`Original array after removing last two fruits: `, newFruits);

      newFruits.splice(0, 0, "Grapes", "Orange");
      console.log(
        `After inserting grapes and orange at the beginning:`,
        newFruits
      );

      /*       5.	Array Joining and Concatenation:
      o	Combine all the fruits into a single string separated by commas.
      o	Create a new array by combining the fruit array with a vegetable array: ["carrot", "broccoli", "potato"].
       */
      const fruitsString = newFruits.toString();
      console.log(
        `String of fruits using toString()separated by commas:`,
        fruitsString
      );
      const newFruitsString = newFruits.join(" ");
      console.log(
        `String of fruits using join() separated by space:`,
        newFruitsString
      );

      const vegetables = ["Carrot", "LadyFinger", "Eggplant"];

      const combiArr = newFruits.concat(vegetables);
      console.log(
        `New array after combining newFruits to vegetables`,
        combiArr
      );

      /*       6.	Array Sorting and Reversing:
      o	Sort the fruit array alphabetically.
      o	Reverse the order of the fruits in the array.
       */

      /*  7.	Array Mapping and Filtering:
      o	Create a new array containing the length of each fruit name.
      o	Filter the fruit array to keep only fruits with more than 5 characters.
       */

      const newArray = newFruits.map((value, index) => {
        const fruitLen = value.length;
        return fruitLen;
      });
      console.log(
        `New array with it containing length of each fruit`,
        newArray
      );
      const filteredArray = newFruits.filter((value) => {
        if (value.length > 5) {
          return true;
        }
      });
      console.log(
        `Array containing fruits with more than 5 characters`,
        filteredArray
      );

      /*       9.	Array Flattening and FlatMapping:
      o	Flatten a nested array: [[1, 2], [3, 4], [5, 6]].
      o	Map and flatten an array of objects to extract a specific property: [{name: "Alice", age: 25}, {name: "Bob", age: 30}].
       */
      const nestedArray = [
        [1, 2],
        [3, 4],
        [5, 6],
      ];

      const flattenedArray = nestedArray.flat();
      console.log(`Flattened array:`, flattenedArray);

      const nestedObj = [
        { name: "Alice", age: 25 },
        { name: "Bob", age: 30 },
      ];

      const flattenedObj = nestedObj.flatMap((value) => {
        return value.age;
      });
      console.log(`Flattened Obj: `, flattenedObj);

      //Use copy within:
      const names = ["honey", "money", "Vansh", "Ram", "Mohan"];
      const copiedArray = names.copyWithin(2, 0, 4);
      console.log(`Copied array:`, copiedArray);

      //   •	Given an array of numbers, calculate the average, maximum, and minimum values.
      const numbers = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10];
      let sum = 0;
      for (let i = 0; i < numbers.length; i++) {
        sum += numbers.at(i);
      }
      const avg = sum / numbers.length;
      const max = Math.max(...numbers);
      const min = Math.min(...numbers);
      console.log(`Provided numbers: ${numbers}\n
            Sum: ${sum}\n
            Avg: ${avg}\n
            Max: ${max}\n
            Min: ${min}\n`);

      //   •	Filter an array of products to find products that match a certain price range.

      const prices = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10];
      const from = 3;
      const to = 8;
      const filteredPrices = prices.filter((value) => {
        if (value >= from && value <= to) {
          return true;
        }
      });
      console.log(filteredPrices);

      // COPYWITHIN METHOD
      //   1. Given an array `[10, 20, 30, 40, 50]`, use `copyWithin()` to replace the first two elements with the last two elements.

      const myArr = [10, 20, 30, 40, 50];
      console.log(myArr.copyWithin(0, 3, 5));
      // 2.	Use copyWithin() on the array [10, 20, 30, 40, 50] to shift the last three elements ([30, 40, 50]) to the first three positions.
      const arr2 = [10, 20, 30, 40, 50];
      console.log(arr2.copyWithin(0, 2, 5));

      // 3.	Given an array [5, 10, 15, 20, 25, 30], use copyWithin() to copy the middle two elements ([15, 20]) to the start of the array.
      // Original array
      const arr3 = [5, 10, 15, 20, 25, 30];

      // Function to find middle indices
      function findMid(array) {
        let midIndex1, midIndex2;
        if (array.length % 2 === 0) {
          midIndex1 = array.length / 2 - 1;
          midIndex2 = midIndex1 + 1;
        } else {
          midIndex1 = Math.floor(array.length / 2);
          midIndex2 = midIndex1;
        }
        return [midIndex1, midIndex2];
      }

      // Find middle indices
      const [midIndex1, midIndex2] = findMid(arr3);

      // Use copyWithin() with the calculated indices
      // Note: midIndex2 + 1 is used because copyWithin() excludes the end index
      arr3.copyWithin(0, midIndex1, midIndex2 + 1);

      // Output the modified array
      console.log(arr3);

      // 5.	Overwrite all elements in [100, 200, 300, 400, 500] with the first element (100) using copyWithin().
      const arr4 = [100, 200, 300, 400, 500];
      overwrite(arr4);
      function overwrite(array) {
        for (let i = 1; i < array.length; i++) {
          array.copyWithin(i, 0, 1);
        }
        console.log(array);
      }
      // 7.	Duplicate the first three elements ([7, 14, 21]) in the array [7, 14, 21, 28, 35] using copyWithin().
      const arr5 = [7, 14, 21, 28, 35];
      console.log(arr5.copyWithin(2 + 1, 0));

      // 8.	Use copyWithin() to remove the middle element ([3]) from the array [1, 2, 3, 4, 5].
      const arr6 = [1, 2, 3, 4, 5];
      const [index1, index2] = findMid(arr5);
      arr6.copyWithin(index1, index1 + 1);
      arr6.pop();
      console.log(arr6);

      // 9.	Given an array [1, 2, 3, 4, 5], use copyWithin() to swap the first and last elements.
      const arr7 = [1, 2, 3, 4, 5];
      function swap(array) {
        const first = array[0];
        array.copyWithin(0, array.length - 1);
        array.pop();
        array.push(first);
        console.log(array);
      }
      swap(arr7);

      // 10.	Using copyWithin(), duplicate the last two elements ([4, 5]) in the array [1, 2, 3, 4, 5] and place them in the middle of the array. Hint: try splice.
      const arr8 = [1, 2, 3, 4, 5];
      //Indices of middle elements:
      const [i1, i2] = findMiddle(arr8);
      //Copying last two elements to the middle:
      arr8.copyWithin(i1, arr8.length - 2);
      console.log(arr8);
      function findMiddle(array) {
        //For storing index of middle elements
        let i1;
        let i2;
        //For even length array:
        if (array.length % 2 === 0) {
          i1 = array.length / 2 - 1;
          i2 = i1 + 1;
        } else {
          // For odd length array:
          i1 = Math.floor(array.length / 2) - 1;
          i2 = i1;
        }
        return [i1, i2];
      }
      // Write a function that removes the 3rd and 4th elements from an array using splice. Return the modified array.
      const arr9 = [1, 2, 3, 4, 5];
      console.log(remove(arr9));
      function remove(array) {
        array.splice(2, 2);
        return array;
      }
      // Use splice to insert the elements "red" and "blue" at the 2nd index of an array without removing any existing elements.
      const arr10 = ["purple", "yellow", "orange", "green", "pink"];
      arr10.splice(2, 0, "red", "blue");
      console.log(arr10);

      // Write a function that replaces the last two elements of an array with "end1" and "end2" using splice.
      const arr11 = [1, 2, 3, 4, 5, 6, 7];
      function replace(array) {
        array.splice(array.length - 2, 2, "end1", "end2");
        return array;
      }
      console.log(replace(arr11));
      // What happens when you call array.splice(2, 0) on an empty array? Write and test the code.
      const empty = [];
      empty.splice(2, 0);
      console.log(empty);

      // Use splice to remove and return the first 3 elements of an array. Print both the modified array and the returned elements.
      const arr12 = [1, 2, 3, 4, 5];
      console.log(
        `Returned array: ${arr12.splice(0, 3)}\nModified array: ${arr12}`
      );

      // Use a negative index in splice to remove the last three elements from an array. What does the resulting array look like?
      const arr13 = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10];
      arr13.splice(-3, 3);
      console.log(arr13);

      // Write a function that takes an array, an index, a number n, and a value v, and replaces n elements starting at the given index with the value v using splice.
      function replace(array, index, n, v) {
        array.splice(index, n, v);
        return array;
      }
      const arr14 = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10];
      console.log(replace(arr14, 3, 3, "Honey"));

      // Use splice to insert all elements of a second array into the middle of the first array.

      arr15 = [1, 2, 3, 4, 5];
      const [ind1, ind2] = findMiddle(arr15);
      arr16 = ["a", "b", "c"];
      for (let i = arr16.length - 1; i >= 0; i--) {
        arr15.splice(ind1, 0, arr16[i]);
      }
      console.log(arr15);
      // What happens if you use splice with a start index greater than the array's length? Test it and describe the behavior.
      const arr17 = [1, 2, 3];
      console.log(arr17.splice(4, 1, "hello"));
      console.log(arr17);

      // Write a function that modifies an array using splice, and then restores it to its original state. Show how you keep track of the removed elements and reinsert them in the correct positions.
      arr18 = [1, 2, 3, 4, 5];
      modify(arr18, 2, 2, "a");
      function modify(array, index, n, v) {
        console.log(`Original array: ${array}`);
        const removedElement = array.splice(index, n, v);
        console.log(
          `Removed Element: ${removedElement}\nModified Array: ${array}`
        );
        //Undo array:
        array.splice(index, 1, removedElement);
        console.log(`Undid array: ${array}`);
      }

      // Extract the middle 3 elements from an array.
      let myArray = [1, 2, 3, 4, 5, 6, 7];
      const middleIndex = Math.floor(myArray.length / 2);
      console.log(myArray.slice(middleIndex - 1, middleIndex + 2));
      // Extract the last 4 elements from an array without mutating it.
      myArray = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10];
      const newArr1 = myArray.slice(myArray.length - 4, myArray.length);
      console.log(myArray);
      console.log(newArr1);
      // Return the first half of an array, including the middle element if the length is odd.
      myArray = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10];
      console.log(firstHalf(myArray));
      function firstHalf(array) {
        if (array.length % 2 === 0) {
          return array.slice(0, array.length / 2);
        } else {
          return array.slice(0, array.length / 2 + 1);
        }
      }
      // Create a copy of an array using the slice() method.
      myArray = ["a", "b", "c", 1, 2, 3];
      const copyArray = myArray.slice(0, myArray.length);
      console.log(copyArray);
      // Use slice() to create a new array without the first element.
      myArray = ["a", "b", "c", 1, 2, 3];
      console.log(myArray.slice(1, myArray.length));

      // Write a function to extract elements between two indices (exclusive) using slice().
      myArray = ["a", "b", "c", 1, 2, 3];
      console.log(extract(myArray, 2, 5));
      function extract(array, i1, i2) {
        return array.slice(i1 + 1, i2);
      }
      // Extract a range of elements using negative indices.
      myArray = ["a", "b", "c", 1, 2, 3];
      console.log(myArray.slice(0, -1));

      // Find the first occurrence of the number 5 in an array using indexOf.
      myArray = [1, 2, 5, 3, 5];
      console.log(myArray.indexOf(5, 0));
      // Find the last occurrence of the string "apple" in an array using lastIndexOf.
      myArray = ["app", "apple", "ap", "apple"];
      console.log(myArray.lastIndexOf("apple", 3));
      // Use indexOf to find the position of the string "orange" starting from index 3 in an array.
      myArray = [
        "apple",
        "orange",
        "apple",
        "grapes",
        "orangee",
        "apple",
        "grapes",
        "orange",
      ];
      console.log(myArray.indexOf("orange", 3)); //not found
      console.log(myArray.indexOf("orange", 7)); //not found
      // Use lastIndexOf to find the position of the number 20 starting from index 5 in an array.
      myArray = [1, 3, 3, 4, 6, 20, 30, 420, 20];
      console.log(myArray.lastIndexOf(20, 5));
      console.log(myArray.lastIndexOf(20, 4));

      myArray = [
        "apple",
        "orange",
        "apple",
        "banana",
        "grapes",
        "orangee",
        "apple",
        "grapes",
        "banana",
        "orange",
      ];
      console.log(firstAndLastIndexOf(myArray, "banana"));
      function firstAndLastIndexOf(array, word) {
        return [
          array.indexOf(word, 0),
          array.lastIndexOf(word, array.length - 1),
        ];
      }

      // Determine whether a specific item occurs more than once in an array using indexOf and lastIndexOf.

      function duplicateChecker(array, word) {
        if (
          array.indexOf(word) !== -1 &&
          array.lastIndexOf(word) !== array.indexOf(word)
        ) {
          return "Duplicate exists.";
        } else {
          return "Duplicate doesn't exist.";
        }
      }
      myArray = ["a", "b", "d", "d", "a", "f"];
      console.log(duplicateChecker(myArray, "m"));

      // Use indexOf to find the index of an object in an array of objects.
      myArray = [
        { name: "Honey", age: 26 },
        { name: "Money", age: 23 },
        { name: "Vansh", age: 16 },
      ];
      const index = myArray.findIndex((value, index) => {
        if (value.name === "Honey" && value.age === 26) {
          return true;
        }
      });
      console.log(index);
    </script>
  </body>
</html>
